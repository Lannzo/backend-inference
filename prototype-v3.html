<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SettleNet - Mapping Informal Settlements</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Roboto+Mono:ital,wght@0,400;0,500;0,700;1,400&family=Caveat:wght@500&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
        integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY=" crossorigin="">
    <link rel="stylesheet" href="/static/css/prototype.css">
    <link rel="stylesheet" href="/static/css/architecture-viewer.css">
</head>

<body>
    <!-- FLOATING NAVIGATION -->
    <nav class="floating-nav" aria-label="Quick navigation">
        <ul class="nav-links">
            <li><a href="#hero" class="nav-link" data-scroll-top>SettleNet</a></li>
            <li><a href="#interactive-map" class="nav-link">Interactive Map</a></li>
            <li><a href="#analyze-area" class="nav-link">Analyze Area</a></li>
            <li><a href="#model-performance" class="nav-link">Model Performance</a></li>
            <li><a href="#architecture-explorer" class="nav-link">Architecture Explorer</a></li>
        </ul>
        <div class="nav-handle" role="button" aria-label="Open navigation">&#9776;</div>
    </nav>


    <!-- SECTION 1: HERO -->
    <header class="hero" id="hero">
        <div class="hero__header">SettleNet ALPHA</div>
        <div class="hero__side-label">09.04.2025</div>
        <div class="hero__content">
            <h1 class="hero__title">SettleNet</h1>
            <p class="hero__subtitle">Mapping informal settlements in Quezon City using multi-modal satellite data. A
                deep learning approach for urban planning and humanitarian action.</p>
            <iframe class="hero__iframe" src="https://pipluppp.projects.earthengine.app/view/exploration"
                frameborder="0" loading="lazy" aria-label="Google Earth Engine App - Data Modalities"></iframe>
        </div>
        <div class="hero__footer">
            <span>A Thesis Prototype</span>
            <span>Manila, PH</span>
        </div>
    </header>

    <!-- SECTION 2: DOCUMENT -->
    <main class="document">
        <section class="document__section" aria-labelledby="interactive-map">
            <div class="document__coffee-stain" aria-hidden="true"></div>
            <div class="document__punched-holes" aria-hidden="true">
                <span class="document__hole"></span>
                <span class="document__hole"></span>
                <span class="document__hole"></span>
                <span class="document__hole"></span>
                <span class="document__hole"></span>
                <span class="document__hole"></span>
                <span class="document__hole"></span>
                <span class="document__hole"></span>
                <span class="document__hole"></span>
                <span class="document__hole"></span>
                <span class="document__hole"></span>
                <span class="document__hole"></span>
            </div>
            <div class="document__content">
                <h2 id="interactive-map">Interactive Map: SettleNet for Quezon City</h2>
                <p>This interactive map is the primary output of the SettleNet model. It provides a detailed,
                    <span class="highlight">data-driven view of predicted informal settlement locations</span> for the
                    entirety of Quezon City. Use the layer controls to explore the data and zoom in to see the
                    fine-grained detail our model produces.
                </p>

                <div class="document__iframe">
                    <iframe class="document__map-frame"
                        src="https://data-concord-367314.projects.earthengine.app/view/settlenet-prototype"
                        frameborder="0" loading="lazy"
                        aria-label="SettleNet Main Interactive Map for Quezon City"></iframe>
                </div>

                <div class="document__analysis" aria-labelledby="analyze-area">
                    <div class="document__annotation">Check if the backend handles large GeoTIFFs efficiently.</div>
                    <h2 id="analyze-area">Analyze Your Own Area</h2>
                    <p>Use the SettleNet model on your own area of interest. Upload a GeoTIFF archive and our backend
                        will run inference to generate a prediction mask. The map below will display your uploaded
                        raster
                        and the resulting settlement overlay.</p>
                </div>

                <section id="map-section" class="analysis-map" aria-label="Upload GeoTIFF for analysis">
                    <aside id="uipanel" class="analysis-map__panel">
                        <div class="panel__header">Analysis Tools</div>

                        <div class="panel__view-controls">
                            <label class="panel__label" for="map-count-select">Map View</label>
                            <select id="map-count-select" class="panel__select">
                                <option value="1" selected>Single Map</option>
                                <option value="2">2 Maps</option>
                                <option value="3">3 Maps</option>
                                <option value="4">4 Maps</option>
                            </select>
                        </div>

                        <label class="panel__label" for="model-select">Model</label>
                        <select id="model-select" class="panel__select">
                            <option value="convnext_all">ConvNeXt All</option>
                            <option value="convnext_bc">ConvNeXt BC</option>
                            <option value="convnext_satellite">ConvNeXt Satellite</option>
                            <option value="settlenet" selected>SettleNet</option>
                        </select>

                        <label class="panel__label" for="modality-select">Input Modality</label>
                        <select id="modality-select" class="panel__select">
                            <option value="satellite" selected>Satellite</option>
                            <option value="building_count">Building Count</option>
                            <option value="all">All</option>
                        </select>

                        <input id="file-input" type="file" accept=".tif,.tiff,.zip" hidden />
                        <div class="panel__status" id="status-container">
                            <p id="status" class="panel__status-text">Ready.</p>
                            <div id="progress-indicator" class="panel__progress" aria-live="polite">
                                <div class="panel__progress-bar">
                                    <div id="progress-bar-fill" class="panel__progress-bar-fill"></div>
                                </div>
                                <span id="progress-message" class="panel__progress-label">Queuedâ€¦</span>
                            </div>
                        </div>

                        <label for="file-input" class="panel__primary-button">Choose GeoTIFF File</label>
                        <span id="file-name-display" class="panel__file-name">No file chosen.</span>

                        <div class="panel__button-row">
                            <button id="upload-btn" class="panel__primary-button">Analyze</button>
                        </div>

                        <div class="panel__control">
                            <label class="panel__label" for="opacity">Mask opacity</label>
                            <input id="opacity" class="panel__slider" type="range" min="0" max="1" step="0.05"
                                value="0.6">
                        </div>

                        <div class="panel__toggles">
                            <label class="panel__toggle"><input id="toggle-input" type="checkbox" checked> Show input
                                raster</label>
                            <label class="panel__toggle"><input id="toggle-mask" type="checkbox" checked> Show
                                prediction mask</label>
                            <label class="panel__toggle"><input id="sync-maps-toggle" type="checkbox"> Sync Maps</label>
                        </div>

                        <div class="panel__actions">
                            <button id="clear-history-btn" class="panel__secondary-button">Clear Prediction
                                History</button>
                        </div>
                    </aside>
                    <div id="map-view-container" class="analysis-map__viewer">
                        <!-- JS injects map instances here -->
                    </div>
                    <button id="panel-toggle-btn" class="analysis-map__panel-toggle" aria-label="Toggle analysis panel"
                        aria-controls="uipanel" aria-expanded="true">
                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor"
                            viewBox="0 0 16 16">
                            <path fill-rule="evenodd"
                                d="M11.354 1.646a.5.5 0 0 1 0 .708L5.707 8l5.647 5.646a.5.5 0 0 1-.708.708l-6-6a.5.5 0 0 1 0-.708l6-6a.5.5 0 0 1 .708 0z" />
                        </svg>
                    </button>
                </section>

                <section class="document__wandb" aria-labelledby="model-performance">
                    <h2 id="model-performance">Model Performance &amp; Training</h2>
                    <p>Our model's development involved numerous experiments to optimize its architecture and
                        hyperparameters. The report below, logged with Weights &amp; Biases, provides a transparent
                        overview
                        of our training runs, validation metrics, and sample predictions across different model
                        versions.</p>
                    <div class="wandb-embed">
                        <iframe
                            src="https://api.wandb.ai/links/duncanb013-polytechnic-university-of-the-philippines/u3hapjxa"
                            title="Weights and Biases training report" loading="lazy"
                            style="border:none;height:1024px;width:100%"></iframe>
                    </div>
                </section>

                <section class="document__architecture" aria-labelledby="architecture-explorer">
                    <h2 id="architecture-explorer">Architecture Explorer</h2>
                    <p>Dig into each encoder and decoder block of the ConvNeXt and SettleNet variants. Hover to preview
                        tensor dimensions, click to pin details, and switch models to compare design choices.</p>
                    <div class="architecture-viewer" data-architecture-viewer>
                        <aside class="architecture-viewer__panel" data-architecture="info-panel" aria-live="polite">
                            <div class="architecture-viewer__panel-column architecture-viewer__panel-column--primary">
                                <header class="architecture-viewer__header">
                                    <div class="architecture-viewer__control-row">
                                        <h3 class="architecture-viewer__title" data-architecture="panel-heading">
                                            Architecture Explorer
                                        </h3>
                                        <label class="architecture-viewer__select-group"
                                            for="architecture-model-select">
                                            <span>Architecture</span>
                                            <select id="architecture-model-select" class="architecture-viewer__select"
                                                data-architecture="model-select"
                                                aria-label="Choose architecture variant"></select>
                                        </label>
                                    </div>
                                    <h4 class="architecture-viewer__subtitle" data-architecture="info-title">
                                        Hover a module
                                    </h4>
                                </header>
                                <p class="architecture-viewer__summary" data-architecture="info-summary">
                                    Highlight a block to read its tensor size and layers.
                                </p>
                            </div>
                            <div class="architecture-viewer__panel-column architecture-viewer__panel-column--media">
                                <div class="architecture-viewer__media" data-architecture="info-media" hidden></div>
                            </div>
                            <div class="architecture-viewer__panel-column architecture-viewer__panel-column--meta">
                                <dl class="architecture-viewer__stats" data-architecture="info-stats"></dl>
                                <ul class="architecture-viewer__details" data-architecture="info-details"></ul>
                            </div>
                        </aside>
                        <div class="architecture-viewer__canvas">
                            <div class="architecture-viewer__loading" data-architecture="loading" role="status">
                                Loading architectureâ€¦
                            </div>
                            <div class="architecture-viewer__viewport">
                                <div class="architecture-viewer__svg-wrapper">
                                    <object class="architecture-viewer__object" data-architecture="svg-object"
                                        type="image/svg+xml" aria-label=""></object>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>
            </div>
        </section>
    </main>

    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"
        integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo=" crossorigin=""></script>
    <script src="https://maps.googleapis.com/maps/api/js?key=" async defer></script>
    <script src="https://unpkg.com/leaflet.gridlayer.googlemutant@latest/dist/Leaflet.GoogleMutant.js"></script>
    <script src="https://unpkg.com/proj4@2.9.2/dist/proj4.js"></script>
    <script src="https://unpkg.com/geotiff@2.1.3/dist-browser/geotiff.min.js"></script>
    <script src="https://unpkg.com/georaster@1.6.0/dist/georaster.browser.bundle.min.js"></script>
    <script
        src="https://unpkg.com/georaster-layer-for-leaflet@4.1.2/dist/v3/webpack/bundle/georaster-layer-for-leaflet.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/jszip@3.10.1/dist/jszip.min.js"></script>
    <script type="module" src="/static/js/main.js"></script>
</body>

</html>